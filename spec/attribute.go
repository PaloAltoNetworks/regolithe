package spec

// AttributeFormat represent the allowed format for an attribute.
type AttributeFormat string

// Various values for an AttributeFormat.
const (
	AttributeFormatFree  AttributeFormat = "free"
	AttributeFormatEmail AttributeFormat = "email"
	AttributeFormatPhone AttributeFormat = "phone"
	AttributeFormatIPv4  AttributeFormat = "ipv4"
	AttributeFormatIPv6  AttributeFormat = "ipv6"
	AttributeFormatCIDR  AttributeFormat = "cidr"
	AttributeFormatDate  AttributeFormat = "date"
)

// AttributeUniqueScope represent the unique scope for an attribute.
type AttributeUniqueScope string

// Various values for an AttributeUniqueScope.
const (
	AttributeUniqueScopeLocal  AttributeUniqueScope = "local"
	AttributeUniqueScopeGlobal AttributeUniqueScope = "global"
)

// AttributeType represents the various type for an attribute.
type AttributeType string

// Various values for AttributeType.
const (
	AttributeTypeString AttributeType = "string"
	AttributeTypeInt    AttributeType = "integer"
	AttributeTypeFloat  AttributeType = "float"
	AttributeTypeBool   AttributeType = "boolean"
	AttributeTypeEnum   AttributeType = "enum"
	AttributeTypeList   AttributeType = "list"
	AttributeTypeObject AttributeType = "object"
	AttributeTypeTime   AttributeType = "time"
	AttributeTypeExt    AttributeType = "external"
)

// AttributeNameConverterFunc is the type of a attribute name conveter.
type AttributeNameConverterFunc func(name string) string

// AttributeTypeConverterFunc is the type of a attribute type conveter.
type AttributeTypeConverterFunc func(typ AttributeType, subtype string) (converted string, provider string)

// An Attribute represents a monolithe specification attribute.
type Attribute struct {

	// NOTE: Order of attributes matters!
	// The YAML will be dumped respecting this order.

	Name         string        `yaml:"name,omitempty"`
	Description  string        `yaml:"description,omitempty"`
	Type         AttributeType `yaml:"type,omitempty"`
	Exposed      bool          `yaml:"exposed,omitempty"`
	SubType      string        `yaml:"subtype,omitempty"`
	Stored       bool          `yaml:"stored,omitempty"`
	Required     bool          `yaml:"required,omitempty"`
	ReadOnly     bool          `yaml:"read_only,omitempty"`
	CreationOnly bool          `yaml:"creation_only,omitempty"`

	AllowedChars   string          `yaml:"allowed_chars,omitempty"`
	AllowedChoices []string        `yaml:"allowed_choices,omitempty"`
	Autogenerated  bool            `yaml:"autogenerated,omitempty"`
	DefaultOrder   bool            `yaml:"default_order,omitempty"`
	DefaultValue   interface{}     `yaml:"default_value,omitempty"`
	Deprecated     bool            `yaml:"deprecated,omitempty"`
	Filterable     bool            `yaml:"filterable,omitempty"`
	ForeignKey     bool            `yaml:"foreign_key,omitempty"`
	Format         AttributeFormat `yaml:"format,omitempty"`
	Getter         bool            `yaml:"getter,omitempty"`
	Setter         bool            `yaml:"setter,omitempty"`
	Identifier     bool            `yaml:"identifier,omitempty"`
	Index          bool            `yaml:"index,omitempty"`
	MaxLength      uint16          `yaml:"max_length,omitempty"`
	MinLength      uint16          `yaml:"min_length,omitempty"`
	MaxValue       float64         `yaml:"max_value,omitempty"`
	MinValue       float64         `yaml:"min_value,omitempty"`
	Orderable      bool            `yaml:"orderable,omitempty"`
	PrimaryKey     bool            `yaml:"primary_key,omitempty"`
	Secret         bool            `yaml:"secret,omitempty"`
	Transient      bool            `yaml:"transient,omitempty"`

	ConvertedName string `yaml:"-"`
	ConvertedType string `yaml:"-"`
	TypeProvider  string `yaml:"-"`
	Initializer   string `yaml:"-"`
}
